<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>weather-metno-el: Weather data from met.no in Emacs</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="weather-metno-el: Weather data from met.no in Emacs"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2012-10-23T16:46+0200"/>
<meta name="author" content="Rüdiger Sonderfeld"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  div.inlinetask {
    padding:10px;
    border:2px solid gray;
    margin:10px;
    background: #ffffcc;
  }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012  Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">weather-metno-el: Weather data from met.no in Emacs</h1>

<p><a href="http://www.met.no/">Meteorologisk institutt</a> (met.no) is the Norwegian national meterological
institute.  It offers free weather data under the <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> license.  The
forecast data is available for locations outside of Norway as well.
Weather-metno-el uses the met.no webservice to provide the weather data in
Emacs.
</p>
<p>
The project is currently work in progress and likely to change dramatically.
See <code>todo.org</code> for todos and longterm goals.
</p>
<p>
To get started compile and load the file <code>weather-metno.el</code>.  Set the variables
<code>weather-metno-location-name</code>, <code>weather-metno-location-latitude</code>,
<code>weather-metno-location-longitude</code>, and optionally <code>weather-metno-location-msl</code>.
This is not strictly necessary but will provide useful defaults for the
forecast.
</p>
<p>
Now run <code>M-x weather-metno-forecast</code> and it will open a new buffer showing the
weather forecast for the given location.
</p>
<p>
Please submit bug reports and feature requests to the <a href="https://github.com/ruediger/weather-metno-el/issues">Github issue tracker</a>.
</p>

<div class="figure">
<p><img src="./images/weather-forecast.png"  alt="./images/weather-forecast.png" /></p>
<p>Weather forecast buffer</p>
</div>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 Orgmode support</a></li>
<li><a href="#sec-2">2 Mode-line support</a></li>
<li><a href="#sec-3">3 Coding Guideline</a></li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Orgmode support</h2>
<div class="outline-text-2" id="text-1">

<p>Weather-metno-el can display weather data in your agenda buffer.  Simply add the
following line to an entry in an agenda file (see <code>org-agenda-files</code>):
</p>



<pre class="example">%%(org-weather-metno)
</pre>


<p>
You have to manually call <code>M-x weather-metno-update</code> to update the data.
</p>

<div class="figure">
<p><img src="./images/agenda.png"  alt="./images/agenda.png" /></p>
<p>Weather data in the Agenda</p>
</div>

<p>
You can customize the way the information is displayed in the agenda buffer by
customizing the variables <code>org-weather-metno-query</code> and
<code>org-weather-metno-format</code>.
</p>
<p>
The variable <code>org-weather-metno-query</code> contains a query language script that is
executed on the weather data to extract and filter the information provided by
met.no.  See the documentation of <code>weather-metno-query</code> for more information
about the query language.  The query language is still under heavy development!
</p>
<p>
The variable <code>org-weather-metno-format</code> defines a format string to present the
information returned by the query to the user.  Unlike <code>format</code> it uses a
different syntax based on curly brackets.  The string <code>{NAME}</code> is replaced by
the matching entry in the result data.  It is possible to add an action to the
data with <code>{NAME|ACTION}</code>.  See <code>weather-query-format</code> for more information
about this.  Currently the specifically defined actions are:
</p>
<dl>
<dt>:symbol</dt><dd>Interpret the number value as a symbol index and retrieve it.
</dd>
<dt>:time</dt><dd>Interpret the value as emacs' time and format it accordingly.
</dd>
</dl>


</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Mode-line support</h2>
<div class="outline-text-2" id="text-2">

<p>Weather-metno-el comes with a feature to display the current weather in the
mode-line.  Similar to the <code>battery</code> feature of Emacs.
</p>
<p>
Activate the feature with <code>M-x weather-metno-mode-line</code>.  It should display the
current weather information and update itself every hour.  However the weather
data is not updated automatically and you have to manually call <code>M-x weather-metno-update</code> for now.
</p>
<p>
The mode-line support does not yet use the query language and therefore the
displayed information can not be configured.
</p>

<div class="figure">
<p><img src="./images/mode-line.png"  alt="./images/mode-line.png" /></p>
<p>mode-line support</p>
</div>

</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Coding Guideline</h2>
<div class="outline-text-2" id="text-3">

<p>Internal functions and variables are marked with a <code>~</code> after the prefix.  E.g.,
<code>weather-metno~format-entry</code>.  This was inspired by the mu4e code.
</p></div>
</div>
</div>

<div id="postamble">
<p class="date">Date: 2012-10-23T16:46+0200</p>
<p class="author">Author: Rüdiger Sonderfeld</p>
<p class="creator"><a href="http://orgmode.org">Org</a> version 7.9.2 with <a href="http://www.gnu.org/software/emacs/">Emacs</a> version 24</p>
<a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a>

</div>
</body>
</html>
